#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸš€ Starting formatting check, syntax problems, typing and build.'
echo ''

echo 'ğŸ¨ Formatting the code...'
npm run format ||
(
    echo 'ğŸ’¥ğŸ’¥ğŸ’¥ Formatting error! ğŸ’¥ğŸ’¥ğŸ’¥
    Prettier formatting found errors in your code,
    check and make changes.';
    false;
)
echo ''
echo 'âœ… Formatting finished!'
echo ''
# Check Prettier standards
echo 'ğŸ“ Check the formatting...'
npm run check-format ||
(
    echo 'ğŸ’¥ğŸ’¥ğŸ’¥ Prettier found errors in formatting! ğŸ’¥ğŸ’¥ğŸ’¥
    Check the error, fix and commit again';
    false;
)
echo ''
echo 'âœ… Formatting with no problems'
echo ''
# Check ESLint Standards
echo 'ğŸ“ Checking the syntax...'
npm run check-lint ||
(
    echo 'ğŸ’¥ğŸ’¥ğŸ’¥ Code with syntax error! ğŸ’¥ğŸ’¥ğŸ’¥
    ESLint found syntax errors in your code! Check, fix the errors and commit again.'
    false; 
)
echo 'âœ… Syntax with no problems'
echo ''
# Check tsconfig standards
echo 'ğŸ“ Checking types...'
npm run check-types ||
(
    echo 'ğŸ’¥ğŸ’¥ğŸ’¥ Code with types errors! ğŸ’¥ğŸ’¥ğŸ’¥
    Tsconfig found types erros in your code!, Check, fix the errors and commit again.'
    false;
)
echo 'âœ… Types with no problems'
echo ''
echo 'ğŸ”¨ Starting building...'
npm run build ||
(
    echo 'ğŸ’¥ğŸ’¥ğŸ’¥ There was an error building the project ğŸ’¥ğŸ’¥ğŸ’¥
    Check the reported errors, fix and commit again. '
    false;
)
echo 'âœ… Built successfully!'
echo 'âœ… Code without formatting, typing, syntax and construction errors!'
echo 'ğŸ“¦ï¸ Local commit done, push remote repository.'
echo ''